<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Hire Booklet - Flipbook Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e0f2fe; /* Light blue/cyan healthcare background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            user-select: none;
        }
        .presentation-container {
            width: 95%;
            max-width: 1000px;
            height: 90vh;
            max-height: 700px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
            border-radius: 1.5rem; /* More pronounced rounded corners */
            overflow: hidden;
            display: flex;
            background-color: white;
            transition: all 0.3s ease;
        }
        
        /* --- Flipbook Styling & Transitions --- */
        .slides-wrapper {
            position: relative;
            width: 75%;
            height: 100%;
            perspective: 1500px; 
        }
        .slide {
            flex-shrink: 0;
            width: 100%;
            height: 100%;
            padding: 3rem;
            box-sizing: border-box;
            position: absolute;
            top: 0;
            left: 0;
            overflow-y: auto;
            transform-style: preserve-3d;
            backface-visibility: hidden;
            background-color: white;
            transition: transform 1s, z-index 0s 1s; 
            border-left: 1px solid rgba(0,0,0,0.1);
            z-index: 1; 
            transform: rotateY(0deg); /* Default flat position */
        }
        .slide-content h2 {
            font-size: 2.25rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 1.5rem;
            border-bottom: 3px solid #00b0f0; /* Bright blue for flare */
            padding-bottom: 0.5rem;
        }
        .slide-content h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1e3a8a; /* Darker blue for headings */
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }
        .slide-content ul, .slide-content ol {
            list-style-position: inside;
            padding-left: 1rem;
            margin-bottom: 1rem;
        }
        .slide-content ul li {
            margin-bottom: 0.5rem;
            padding-left: 0.5rem;
            border-left: 3px solid #93c5fd; /* Soft blue bullet line */
        }
        .bullet-list li::before {
            content: "•";
            color: #1e40af; /* Deep blue bullet */
            font-weight: 700;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }
        .clickable-link {
            color: #1d4ed8;
            font-weight: 600;
            text-decoration: underline;
            cursor: pointer;
            transition: color 0.2s;
        }
        .clickable-link:hover {
            color: #1e3a8a;
        }
        .nav-button {
            background-color: #00b0f0; /* Bright blue button */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.1s;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .nav-button:hover:not(:disabled) {
            background-color: #1e40af; /* Darker blue on hover */
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }
        .nav-button:disabled {
            background-color: #a5b4fc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* New TOC Styling & Scrollability */
        #toc-container {
            overflow-y: auto; /* Enables scrolling for TOC */
            max-height: calc(100% - 140px); /* Adjust based on header/footer height */
            margin-bottom: 1rem;
        }
        #toc a {
            display: block;
            padding: 0.5rem 0.75rem;
            margin-bottom: 0.5rem; 
            border-radius: 0.5rem;
            transition: background-color 0.2s, color 0.2s, border 0.2s;
            cursor: pointer;
            background-color: #f3f4f6; 
            border: 1px solid #e5e7eb; 
            color: #374151;
            font-weight: 500;
            line-height: 1.2;
        }
        #toc a:nth-child(even) {
            background-color: #e0f7fa; /* Slightly different shade for zebra effect */
        }
        #toc a:hover {
            background-color: #b3e5fc; /* Light hover blue */
            border-color: #81d4fa;
            color: #1e40af;
        }
        .toc-active {
            background-color: #00b0f0 !important;
            color: white !important;
            border-color: #1e40af !important;
            font-weight: 700;
        }

        /* Classes for the flip animation */
        .flipped-next {
            transform: rotateY(-180deg);
            z-index: 1;
            transition: transform 0s 1s, z-index 0s 1s;
        }
        .flipping {
            transform: rotateY(-180deg);
            z-index: 10;
            transition: transform 1s ease-in-out;
        }
        .active-slide {
            z-index: 5;
            transform: rotateY(0deg);
            transition: transform 0s;
        }
        
        /* Modal and Game Styles (Kept functional but clean) */
        .modal {
            display: none; 
            position: fixed;
            z-index: 50; 
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto; 
            background-color: rgba(0,0,0,0.4); 
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto; 
            padding: 20px;
            border-radius: 1rem;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            animation-name: animatetop;
            animation-duration: 0.4s;
        }
        @keyframes animatetop {
            from {top: -300px; opacity: 0}
            to {top: 0; opacity: 1}
        }
        .close-btn {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-btn:hover, .close-btn:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
        .loader {
            border: 4px solid #f3f3f3; 
            border-top: 4px solid #00b0f0; 
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* Matching Game Styles */
        .match-item {
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.2s;
            border: 2px solid transparent;
            padding: 0.75rem;
            border-radius: 0.5rem;
            font-weight: 600;
        }
        .match-item:hover:not(.matched) {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .source-item:hover:not(.matched) {
            background-color: #c5e1ff; /* Light Blue hover */
            border-color: #42a5f5;
        }
        .target-item:hover:not(.matched) {
            background-color: #fff9c4; /* Light Yellow hover */
            border-color: #ffc107;
        }
        .selected {
            border-color: #00b0f0 !important;
            box-shadow: 0 0 0 3px #81d4fa;
            transform: translateY(-2px);
        }
        .matched {
            background-color: #4caf50 !important; /* Green for correct */
            color: white !important;
            cursor: default;
            box-shadow: none;
            border-color: #388e3c;
        }
        .incorrect {
            background-color: #f44336 !important; /* Red for incorrect */
            color: white !important;
            animation: shake 0.5s;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
        /* Navigation Controls Positioning */
        .nav-controls-footer {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 1rem 3rem;
            display: flex;
            justify-content: space-between;
            background-color: white;
            border-top: 1px solid #e5e7eb;
            z-index: 20; /* Ensure controls are always on top */
        }
        /* HIPAA Quiz Styles */
        .quiz-option {
            cursor: pointer;
            padding: 0.75rem;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            transition: background-color 0.2s;
            font-weight: 600;
            border: 2px solid #e5e7eb;
        }
        .quiz-option:hover {
            background-color: #f3f4f6;
        }
        .quiz-correct {
            background-color: #d1fae5;
            border-color: #10b981;
            color: #065f46;
        }
        .quiz-incorrect {
            background-color: #fee2e2;
            border-color: #f87171;
            color: #991b1b;
        }
        .quiz-feedback-text {
            font-size: 0.9rem;
            margin-top: 0.5rem;
            font-style: italic;
        }
    </style>
</head>
<body>

    <div class="presentation-container">
        <!-- Sidebar Table of Contents -->
        <div class="w-1/4 bg-gray-50 p-6 border-r border-gray-200 flex flex-col justify-between">
            <div class="flex flex-col h-full">
                <h1 class="text-xl font-bold text-indigo-600 mb-4 border-b pb-3">New Hire Booklet</h1>
                <div id="toc-container" class="flex-grow">
                    <nav id="toc" class="text-sm">
                        <!-- Links populated by JS, or can be added manually -->
                    </nav>
                </div>
            </div>

            <!-- Removed AI Q&A Button -->
            <p class="text-xs text-gray-500 mt-2 text-center">Use arrows or click TOC to navigate.</p>
        </div>

        <!-- Main Slide Area -->
        <div id="slides-wrapper" class="slides-wrapper">

            <!-- SLIDE 0: Welcome -->
            <div id="slide-0" class="slide active-slide">
                <div class="slide-content">
                    <h1 class="text-4xl font-extrabold text-indigo-700 mb-4 pt-10">Welcome to the Team!</h1>
                    <p class="text-2xl text-gray-600 mb-8">We are absolutely delighted to have you join our team and become a key part of our mission. This booklet is your essential guide to our culture, systems, and values.</p>
                    
                    <div class="mt-20">
                        <h3 class="text-xl font-semibold">Ready to begin?</h3>
                        <p class="text-gray-500">Use the navigation buttons below or the Table of Contents on the left to start.</p>
                    </div>
                </div>
            </div>

            <!-- SLIDE 1: Core Values -->
            <div id="slide-1" class="slide">
                <div class="slide-content">
                    <h2>1. Core Values</h2>
                    <p class="text-lg mb-4">Our core values are more than just statements—they’re daily practices that guide us in every conversation and decision.</p>
                    <ul class="grid grid-cols-2 gap-4 mt-8 list-none p-0">
                        <li class="bg-indigo-50 p-4 rounded-lg shadow-sm text-center font-bold text-indigo-800">Humbly Confident</li>
                        <li class="bg-indigo-50 p-4 rounded-lg shadow-sm text-center font-bold text-indigo-800">Authentic</li>
                        <li class="bg-indigo-50 p-4 rounded-lg shadow-sm text-center font-bold text-indigo-800">Solution Focused</li>
                        <li class="bg-indigo-50 p-4 rounded-lg shadow-sm text-center font-bold text-indigo-800">Driven to Excellence</li>
                        <li class="bg-indigo-50 p-4 rounded-lg shadow-sm text-center font-bold text-indigo-800">Ownership</li>
                    </ul>

                    <div id="core-values-quiz" class="mt-8 p-4 border border-indigo-200 rounded-lg bg-indigo-50">
                        <h3 class="mt-0 text-indigo-600 border-b pb-2">Value in Action: Scenario Quiz </h3>
                        <p class="text-sm italic text-gray-700 mb-3">Test your knowledge of our core values in a real-world setting.</p>
                        <button id="generate-scenario-btn" class="nav-button bg-pink-500 hover:bg-pink-600 text-sm py-2 px-4 inline-block transition-all">Generate Scenario</button>
                        <p id="scenario-text" class="text-sm italic text-gray-700 mt-3"></p>
                        <div id="scenario-loader" class="loader hidden mt-3"></div>
                        <div id="answer-area" class="mt-3 hidden">
                            <button id="reveal-answer-btn" class="nav-button bg-yellow-500 hover:bg-yellow-600 text-sm py-2 px-4 inline-block transition-all">Reveal Core Value</button>
                            <p id="answer-text" class="text-sm font-bold text-yellow-800 mt-2 hidden"></p>
                        </div>
                    </div>

                </div>
            </div>

            <!-- SLIDE 2: Organizational Structure (UPDATED WITH LINKS) -->
            <div id="slide-2" class="slide">
                <div class="slide-content">
                    <h2>2. Organizational Structure</h2>
                    <p class="mb-4">We are a consulting group partnered with multiple U.S. locations. Click the department names below for their SharePoint resource pages:</p>
                    
                    <div class="grid grid-cols-3 gap-6">
                        <!-- CLINICAL DEPARTMENT LINKS -->
                        <div class="p-4 bg-gray-100 rounded-lg">
                            <h3 class="text-indigo-600 mt-0"><a href="https://hillvalleyhc.sharepoint.com/sites/HillValleyHub/SitePages/Clinical.aspx?csf=1&web=1&share=EZ3MpnvAS6JGtIphQf-s5tQBC_XSAZ0qj9QPon-1Li9wPQ&e=qi2Vpc" target="_blank" class="clickable-link">Clinical</a></h3>
                            <ul class="text-sm bullet-list list-none p-0">
                                <li><a href="https://hillvalleyhc.sharepoint.com/sites/HillValleyHub/SitePages/Health-Informatics(1).aspx" target="_blank" class="clickable-link">Health Informatics</a></li>
                                <li><a href="https://hillvalleyhc.sharepoint.com/sites/HillValleyHub/SitePages/QAPI.aspx" target="_blank" class="clickable-link">QAPI</a></li>
                                <li><a href="https://hillvalleyhc.sharepoint.com/sites/HillValleyHub/SitePages/Clinical-Systems.aspx" target="_blank" class="clickable-link">Clinical Systems/ Policies</a></li>
                                <li><a href="https://hillvalleyhc.sharepoint.com/:u:/s/HillValleyHub/EengjAW1ud1HnDptCNhyoSkBCDh1Hsx7hcOyQq7Jnr5gMQ?e=YHlFEl" target="_blank" class="clickable-link">Case Management</a></li>
                                <li><a href="https://hillvalleyhc.sharepoint.com/sites/HillValleyHub/SitePages/Survey-Management.aspx" target="_blank" class="clickable-link">Survey Readiness</a></li>
                                <li><a href="https://hillvalleyhc.sharepoint.com/sites/HillValleyHub/SitePages/Clinical-Reimbursement.aspx" target="_blank" class="clickable-link">Clinical Reimbursement</a></li>
                                <li><a href="https://hillvalleyhc.sharepoint.com/sites/HillValleyHub/SitePages/Education.aspx" target="_blank" class="clickable-link">Clinical Education</a></li>
                                <li><a href="https://hillvalleyhc.sharepoint.com/sites/HillValleyHub/SitePages/Infection-Control.aspx" target="_blank" class="clickable-link">Infection Control</a></li>
                            </ul>
                        </div>
                        
                        <!-- OPERATIONS DEPARTMENT LINKS -->
                        <div class="p-4 bg-gray-100 rounded-lg">
                            <h3 class="text-indigo-600 mt-0">Operations</h3>
                            <ul class="text-sm bullet-list list-none p-0">
                                <li><a href="https://hillvalleyhc.sharepoint.com/sites/HillValleyHub/SitePages/Strategy.aspx" target="_blank" class="clickable-link">Business Development</a></li>
                                <li><a href="https://hillvalleyhc.sharepoint.com/sites/HillValleyHub/SitePages/Human-Resources.aspx" target="_blank" class="clickable-link">Human Resources</a></li>
                                <li><a href="https://hillvalleyhc.sharepoint.com/sites/HillValleyHub/SitePages/Talent-Acquisition.aspx?csf=1&web=1&share=EbSgEYDmKKRFt6NIe4CqGp8BPxivVnauPjEXo_P4Il5O9A&e=gdQBlY" target="_blank" class="clickable-link">Talent Acquisition</a></li>
                                <li><a href="https://hillvalleyhc.sharepoint.com/sites/HillValleyHub/SitePages/Maintenance.aspx" target="_blank" class="clickable-link">Facility Maintenance</a></li>
                                <li>Housekeeping</li>
                                <li>Dietary</li>
                                <li>Life Enrichment</li>
                                <li><a href="https://hillvalleyhc.sharepoint.com/sites/HillValleyHub/SitePages/Social-Services.aspx" target="_blank" class="clickable-link">Social Services</a></li>
                            </ul>
                        </div>
                        
                        <!-- FINANCE DEPARTMENT LINKS -->
                        <div class="p-4 bg-gray-100 rounded-lg">
                            <h3 class="text-indigo-600 mt-0"><a href="https://hillvalleyhc.sharepoint.com/sites/HillValleyHub/SitePages/Finance.aspx" target="_blank" class="clickable-link">Finance</a></h3>
                            <ul class="text-sm bullet-list list-none p-0">
                                <li>Payroll</li>
                                <li><a href="https://hillvalleyhc.sharepoint.com/sites/HillValleyHub/SitePages/Business-Office-Manager.aspx" target="_blank" class="clickable-link">Business Office</a></li>
                                <li><a href="https://hillvalleyhc.sharepoint.com/sites/HillValleyHub/SitePages/Procurement.aspx?Mode=Edit" target="_blank" class="clickable-link">Procurement</a></li>
                                <li><a href="https://hillvalleyhc.sharepoint.com/sites/HillValleyHub/SitePages/Financial-Planning-&-Analysis.aspx" target="_blank" class="clickable-link">Planning, and Analytics</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SLIDE 3: Culture & Employee Experience -->
            <div id="slide-3" class="slide">
                <div class="slide-content">
                    <h2>3. Culture & Employee Experience</h2>
                    <p class="mb-4">Our focus goes beyond fun—we use data (surveys) to improve employee connection and support. </p>
                    
                    <h3 class="text-indigo-600">Development and Feedback</h3>
                    <ul class="bullet-list list-none">
                        <li>We use New Hire, Exit, Pulse and Engagement <strong>Surveys</strong> to collect feedback.</li>
                        <li>We provide <strong>leadership development programs</strong> focused on soft skills, communication, empathy, and respect.</li>
                    </ul>

                    <h3 class="text-indigo-600">Engagement Support</h3>
                    <ul class="bullet-list list-none">
                        <li><strong>Kudos Cards</strong> for peer and manager recognition.</li>
                        <li>Monthly employee engagement events ideas.</li>
                        <li>Print and Post Boards for internal communication.</li>
                        <li>National Skilled Nursing Care Week & Assisted Living Week & Hospital Week celebrations.</li>
                    </ul>
                    <p class="text-sm mt-4">For more information, check out our <a href="#" onclick="alert('Simulating opening Employee Engagement SharePoint Page');" class="clickable-link">Employee Engagement SharePoint Page</a>.</p>
                </div>
            </div>

            <!-- SLIDE 4: Policies & Training Essentials -->
            <div id="slide-4" class="slide">
                <div class="slide-content">
                    <h2>4. Policies & Training Essentials</h2>
                    <p class="mb-6">Compliance starts on Day One. Ensure these steps are managed promptly:</p>
                    
                    <ul class="bullet-list list-none">
                        <li>Your required <strong>training</strong> will be provided by your manager and must be completed <strong>in a timely manner</strong>.</li>
                        <li>Review and follow the <strong>expense policy in detail</strong> if you’ve received a company credit card.</li>
                        <li>All policies, compliance documents, and training resources are housed in our <strong>intranet</strong>.</li>
                    </ul>
                    
                </div>
            </div>

            <!-- SLIDE 5: Systems & Tools You’ll Use (OVERVIEW) -->
            <div id="slide-5" class="slide">
                <div class="slide-content">
                    <h2>5. Systems & Tools Overview</h2>
                    <p class="mb-4">You’ll rely on several key systems and tools to succeed in your role. Here’s a quick reference:</p>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h3 class="mt-0 text-blue-700">System Name</h3>
                            <ul class="bullet-list list-none text-sm font-semibold">
                                <li><a href="https://www.sharepoint.com" target="_blank" class="clickable-link">SharePoint</a></li>
                                <li><a href="https://www.empeon.com" target="_blank" class="clickable-link">Empeon</a></li>
                                <li><a href="https://pcchillvalley.training.reliaslearning.com/" target="_blank" class="clickable-link">Relias</a></li>
                                <li><a href="https://www.tels.net/TELSLogin/" target="_blank" class="clickable-link">TELS</a></li>
                                <li>Outlook / Teams / WhatsApp</li>
                                <li>PCC (PointClickCare)</li>
                            </ul>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h3 class="mt-0 text-blue-700">Primary Function</h3>
                            <ul class="bullet-list list-none text-sm">
                                <li>All News/Information</li>
                                <li>Payroll & HRIS</li>
                                <li>Training</li>
                                <li>Maintenance System</li>
                                <li>Communication & Messaging</li>
                                <li>Role-dependent Clinical/Billing</li>
                            </ul>
                        </div>
                    </div>
                    

                    <h3 class="text-indigo-600 mt-6">Knowledge Check Next!</h3>
                    <p class="text-sm">Ready to check your retention? Move to the next slide for the Systems Matching Game!</p>
                </div>
            </div>

            <!-- SLIDE 6: Systems Matching Game (INTERACTIVE) -->
            <div id="slide-6" class="slide">
                <div class="slide-content">
                    <h2>5. Systems Knowledge Check</h2>
                    <p class="mb-4">Match the system/tool with its correct purpose.</p>
                    
                    <div id="matching-game" class="p-4 bg-gray-100 rounded-lg">
                        <div class="grid grid-cols-2 gap-4" id="match-grid">
                            <!-- Game items will be injected here by JavaScript -->
                        </div>
                        <div class="mt-4 text-center">
                            <p id="match-feedback" class="font-bold text-lg text-gray-700"></p>
                            <p id="match-progress" class="text-sm text-gray-500 mt-1"></p>
                        </div>
                    </div>
                    
                </div>
            </div>
            
            <!-- SLIDE 7: Onboarding & Development -->
            <div id="slide-7" class="slide">
                <div class="slide-content">
                    <h2>6. Onboarding & Development</h2>
                    <h3 class="text-indigo-600">First 90 Days</h3>
                    <ul class="bullet-list list-none">
                        <li>You will meet with several team members across departments through <strong>1:1 Microsoft Teams meetings</strong>.</li>
                        <li>Your manager will guide you during your <strong>first 90 days</strong>.</li>
                    </ul>
                    <h3 class="text-indigo-600">Ongoing Development</h3>
                    <p>We are committed to development. Our leadership programs are designed to help you grow as a people leader through soft skills, communication, and team-building.</p>
                    
                </div>
            </div>

            <!-- SLIDE 8: IT Support -->
            <div id="slide-8" class="slide">
                <div class="slide-content">
                    <h2>7. IT Support (Digacore)</h2>
                    <p class="mb-4">Contact Digacore for IT needs and equipment requests:</p>
                    
                    <div class="bg-red-50 p-6 rounded-lg shadow-md">
                        <h3 class="text-red-700 mt-0">Contact Information</h3>
                        <p class="mb-2">Email: <a href="mailto:support@digacore.com" class="clickable-link">support@digacore.com</a></p>
                        <p class="mb-2">Phone Number: 732-646-5725</p>
                    </div>
                    
                    <h3 class="text-indigo-600">Policies & Equipment</h3>
                    <ul class="bullet-list list-none">
                        <li>IT Policy: Please review the <a href="https://hillvalleyhc.sharepoint.com/:b:/s/HumanResources/EbHOA2tZOIpHg5u9FkavqY0BHLVOTitdB8jMhdu_C5WBMw?e=iSi2J2" target="_blank" class="clickable-link">IT Support Policy</a>.</li>
                        <li>For additional equipment, reach out to your manager.</li>
                    </ul>
                     
                </div>
            </div>

            <!-- SLIDE 9: Email Etiquette & Signatures -->
            <div id="slide-9" class="slide">
                <div class="slide-content">
                    <h2>8. Email Etiquette & Signatures</h2>
                    <h3 class="text-indigo-600">Etiquette Essentials</h3>
                    <ul class="bullet-list list-none">
                        <li>Review the <a href="https://hillvalleyhc.sharepoint.com/:u:/s/HillValleyHub/EUqhTnk4S99MoGs7sF3F2_YB47J8BWHL5tD56qk8gZf9nQ?e=4XC51P" target="_blank" class="clickable-link">Email Retention Policy</a>.</li>
                        <li>Use <strong>accurate and informative subject lines</strong>.</li>
                        <li>Avoid <strong>“Reply All”</strong> unless truly needed.</li>
                        <li>Respond in a timely manner during your working hours.</li>
                    </ul>
                    
                    <div class="mt-8 p-4 border border-indigo-200 rounded-lg bg-indigo-50">
                        <h3 class="mt-0 text-indigo-600 border-b pb-2">Drafting Assistant </h3>
                        <p class="text-sm text-gray-700 mb-3">Provide notes to draft a professional email compliant with our etiquette rules.</p>
                        <textarea id="drafting-query" placeholder="e.g., Email to John in HR. Need to tell him my payroll deposit was wrong. Key facts: amount was $150 short, issue was from last Friday's deposit." 
               rows="4" class="w-full p-2 border border-gray-300 rounded-lg mb-4 focus:ring-purple-500 focus:border-purple-500"></textarea>
                        
                        <button id="draft-email-btn" class="nav-button bg-purple-500 hover:bg-purple-600 text-sm py-2 px-4 inline-block transition-all">Generate Draft</button>
                        <div id="drafting-response-area" class="min-h-40 p-3 bg-gray-50 rounded-lg border border-gray-200 whitespace-pre-wrap mt-3">
                            <p id="drafting-response-text" class="text-sm text-gray-700">Your professional email draft will appear here...</p>
                            <div id="drafting-loader" class="loader hidden mt-4"></div>
                        </div>
                    </div>

                    <h3 class="text-indigo-600">Email Signatures (Auto-Generated)</h3>
                    <p class="text-sm">Signatures are automatically generated. <strong>Do not alter or delete</strong> them.</p>
                    <p class="text-sm mt-2">To change your default phone number (currently mobile), contact IT at <a href="mailto:Support@DigaCore.com" class="clickable-link">Support@DigaCore.com</a>.</p>
                </div>
            </div>

            <!-- SLIDE 10: Expenses and Travel (Overview) -->
            <div id="slide-10" class="slide">
                <div class="slide-content">
                    <h2>9. Expenses and Travel (Part 1)</h2>
                    <p class="mb-4">We use <span class="font-bold text-indigo-600">Ramp</span> for all expense management. Review the <a href="#" onclick="alert('Simulating opening Ramp Policies and company handbook');" class="clickable-link">Ramp Policies and company handbook</a>.</p>
                    
                    <h3 class="text-indigo-600">Key Policies</h3>
                    <ul class="bullet-list list-none">
                        <li><strong>Per Diem:</strong> Up to <strong>$60 per day</strong> for meals and entertainment while traveling (itemized receipts required).</li>
                        <li><strong>Gratuities:</strong> Reimbursable at 15–20% (meals) and 10% (taxi/rideshare).</li>
                        <li><strong>Mileage & Tolls:</strong> Business mileage reimbursed per policy; <strong>commuting miles are NOT reimbursable</strong>.</li>
                        <li><strong>Phone Reimbursement:</strong> <strong>$50 monthly</strong> via Ramp.</li>
                    </ul>
                    
                </div>
            </div>

            <!-- SLIDE 11: Expenses and Travel (Booking) -->
            <div id="slide-11" class="slide">
                <div class="slide-content">
                    <h2>9. Expenses and Travel (Part 2)</h2>
                    <h3 class="text-indigo-600">Travel Booking & Payment</h3>
                    <ul class="bullet-list list-none">
                        <li><strong>Booking Tool:</strong> All flights, hotels, and rental cars must be booked through <strong>Concur (SAP)</strong>.</li>
                        <li><strong>Booking Fee:</strong> $11.00 fee per trip (no receipt needed—allocate to the facility).</li>
                        <li><strong>Payment:</strong> All expenses must be charged to your <strong>Ramp Card</strong>.</li>
                        <li><strong>Reconciliation:</strong> Expenses must be reconciled through the <strong>Ramp App</strong> (receipts required, except the Concur fee).</li>
                    </ul>
                    <h3 class="text-red-600">Prohibited Expenses (Examples)</h3>
                    <ul class="bullet-list list-none text-red-700 text-sm">
                        <li>Upgrades (airline, hotel, rental car), Personal items/snacks.</li>
                        <li>Health club memberships, Spa services.</li>
                        <li>Traffic fines, parking violations.</li>
                    </ul>
                </div>
            </div>

            <!-- SLIDE 12: Social Media (Section 10) -->
            <div id="slide-12" class="slide">
                <div class="slide-content">
                    <h2>10. Social Media</h2>
                    <p class="mb-4">We use <span class="font-bold text-indigo-600">Birdeye</span> to manage our online reputation and social presence effectively.</p>
                    
                    <h3 class="text-indigo-600">Benefits of Consistent Posting</h3>
                    <ul class="bullet-list list-none">
                        <li>Community Engagement (Keeps families connected).</li>
                        <li>Revenue Growth (Attracts new residents).</li>
                        <li>Recruitment Support (Highlights positive culture).</li>
                    </ul>
                    <p class="bg-yellow-100 p-3 rounded-lg mt-4 text-sm font-semibold text-yellow-800">
                        🚨 <strong>MANDATORY:</strong> All pictures of residents or employees <strong>MUST</strong> have a <a href="#" onclick="alert('Simulating opening Media release form details');" class="clickable-link">media release form signed</a> prior to posting on Birdeye.
                    </p>
                    
                </div>
            </div>

            <!-- SLIDE 13: Visiting a Facility (Section 11) -->
            <div id="slide-13" class="slide">
                <div class="slide-content">
                    <h2>11. Visiting a Facility</h2>
                    <h3 class="text-indigo-600">Professional Presence</h3>
                    <ul class="bullet-list list-none">
                        <li>Remember you are a <strong>guest</strong>; maintain professionalism and respect.</li>
                        <li><strong>Check-In/Check-Out:</strong> Report to facility leadership upon arrival and departure.</li>
                        <li><strong>Flexibility:</strong> Adapt respectfully to each facility's processes and norms.</li>
                    </ul>
                    
                </div>
            </div>

            <!-- SLIDE 14: Safety & Compliance (Section 12) -->
            <div id="slide-14" class="slide">
                <div class="slide-content">
                    <h2>12. Safety & Compliance</h2>
                    <p class="mb-4">Ask local leadership about <strong>site-specific practices</strong> before walking the building.</p>
                    
                    <h3 class="text-indigo-600">Infection Control</h3>
                    <ul class="bullet-list list-none text-sm">
                        <li><strong>Dress Code:</strong> Professional attire; <strong>avoid open-toed shoes</strong> in care areas.</li>
                        <li><strong>Hygiene:</strong> Always wash/sanitize hands when entering/exiting/moving between areas.</li>
                        <li><strong>PPE:</strong> Follow posted signage and ask leadership about current <strong>PPE</strong> expectations.</li>
                    </ul>

                    <h3 class="text-indigo-600">Reporting Concerns</h3>
                    <ul class="bullet-list list-none text-sm">
                        <li>Report compliance/safety concerns to the <strong>facility leadership on-site</strong>.</li>
                        <li>Escalate significant or unresolved concerns to your <strong>immediate supervisor or HR</strong>.</li>
                    </ul>
                    
                </div>
            </div>

            <!-- SLIDE 15: HIPAA (Section 13) -->
            <div id="slide-15" class="slide">
                <div class="slide-content">
                    <h2>13. HIPAA: Protecting Privacy</h2>
                    <p class="text-lg font-semibold text-red-700 mb-4">HIPAA applies to everyone—including visitors. Protect resident information!</p>
                    
                    <h3 class="text-indigo-600">Core Directives</h3>
                    <ul class="bullet-list list-none">
                        <li><strong>Never share or discuss resident information</strong> in public areas.</li>
                        <li>Do <strong>not take photos or videos</strong> inside the facility unless explicitly authorized.</li>
                        <li><strong>Access only the information necessary for your role</strong>.</li>
                    </ul>

                    <div id="hipaa-quiz-container" class="mt-6 p-4 border border-indigo-200 rounded-lg bg-indigo-50">
                        <h3 class="mt-0 text-indigo-600 border-b pb-2">HIPAA Do's and Don'ts Quiz</h3>
                        <p id="hipaa-question" class="mb-3 font-semibold text-gray-800"></p>
                        <div id="hipaa-options" class="flex space-x-4">
                            <button class="quiz-option bg-white w-1/2" data-answer="true">TRUE (DO)</button>
                            <button class="quiz-option bg-white w-1/2" data-answer="false">FALSE (DON'T)</button>
                        </div>
                        <p id="hipaa-feedback" class="quiz-feedback-text"></p>
                        <button id="hipaa-next-btn" class="nav-button bg-indigo-600 hover:bg-indigo-700 text-sm py-2 px-4 mt-3 hidden">Next Question</button>
                    </div>
                </div>
            </div>

            <!-- SLIDE 16: End Slide -->
            <div id="slide-16" class="slide">
                <div class="slide-content text-center pt-20">
                    <h1 class="text-4xl font-extrabold text-indigo-700 mb-4">You're All Set!</h1>
                    <p class="text-xl text-gray-600 mb-8">Ready to move on to your next onboarding steps.</p>
                    <a href="#slide-0" class="nav-button inline-block px-8 py-3 bg-green-600 hover:bg-green-700" onclick="currentSlideIndex = 0; showSlide(0, false); return false;">Review Slideshow</a>
                     
                </div>
            </div>
        </div>
        
        <!-- Navigation Controls (Moved to correct position inside presentation-container) -->
        <div class="nav-controls-footer">
            <button id="prev-btn" class="nav-button flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                Previous
            </button>
            <span id="slide-counter" class="text-gray-500 text-sm flex items-center">1 / 17</span>
            <button id="next-btn" class="nav-button flex items-center">
                Next
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
            </button>
        </div>
    </div>
    
    <!-- Removed Gemini AI Q&A Modal -->
    <!-- Removed Gemini Email Drafting Modal -->


    <script>
        let currentSlideIndex = 0;
        const slides = document.querySelectorAll('.slide');
        const slidesWrapper = document.getElementById('slides-wrapper');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const slideCounter = document.getElementById('slide-counter');
        const tocNav = document.getElementById('toc');
        let isAnimating = false;
        
        // --- Core Values Scenario Elements ---
        const generateScenarioBtn = document.getElementById('generate-scenario-btn');
        const scenarioText = document.getElementById('scenario-text');
        const scenarioLoader = document.getElementById('scenario-loader');
        const answerArea = document.getElementById('answer-area');
        const revealAnswerBtn = document.getElementById('reveal-answer-btn');
        const answerText = document.getElementById('answer-text');

        // --- Systems Matching Game Elements ---
        const matchGameGrid = document.getElementById('match-grid');
        const matchFeedback = document.getElementById('match-feedback');
        const matchProgress = document.getElementById('match-progress');
        let selectedSource = null;
        let selectedTarget = null;
        let matchedPairs = 0;

        // Data for the Matching Game on Slide 6
        const MATCHING_DATA = [
            { id: 'm1', source: 'SharePoint', target: 'All News/Information', link: 'https://www.sharepoint.com' },
            { id: 'm2', source: 'Empeon', target: 'Payroll & HRIS', link: 'https://www.empeon.com' },
            { id: 'm3', source: 'Relias', target: 'Training', link: 'https://pcchillvalley.training.reliaslearning.com/' },
            { id: 'm4', source: 'TELS', target: 'Maintenance System', link: 'https://www.tels.net/TELSLogin/' },
        ];


        // --- HIPAA Quiz Data ---
        let hipaaQuizData = [
            { question: "Is it okay to discuss a resident’s chart with a non-clinical colleague in the break room?", answer: false, explanation: "DON'T: Resident information is confidential and should never be discussed in public areas like break rooms or hallways, even if with another employee." },
            { question: "Can you take a photo of a resident’s medication chart if you delete it immediately after reviewing?", answer: false, explanation: "DON'T: Taking photos of protected health information (PHI) on a personal device is a serious HIPAA violation and is strictly prohibited." },
            { question: "Is it permitted to securely dispose of a resident's printed lab results in a shred bin?", answer: true, explanation: "DO: Any printed documents containing resident information MUST be disposed of securely, typically in a designated shred bin." },
            { question: "Should you check the HIPAA policy when visiting a facility if you only access non-resident financial data?", answer: true, explanation: "DO: HIPAA applies to everyone, and you should only access information necessary for your role. Compliance is mandatory for all team members." }
        ];
        let currentHipaaQuestionIndex = 0;
        const hipaaQuestionEl = document.getElementById('hipaa-question');
        const hipaaOptionsEl = document.getElementById('hipaa-options');
        const hipaaFeedbackEl = document.getElementById('hipaa-feedback');
        const hipaaNextBtn = document.getElementById('hipaa-next-btn');


        // --- Slide Data for TOC and Titles ---
        const slideData = [
            { id: 'slide-0', title: 'Welcome to the Team' },
            { id: 'slide-1', title: '1. Core Values' },
            { id: 'slide-2', title: '2. Organizational Structure' },
            { id: 'slide-3', title: '3. Culture & Employee Experience' },
            { id: 'slide-4', title: '4. Policies & Training Essentials' },
            { id: 'slide-5', title: '5. Systems & Tools Overview' },
            { id: 'slide-6', title: '5. Systems Knowledge Check' },
            { id: 'slide-7', primary: true, title: '6. Onboarding & Development' },
            { id: 'slide-8', title: '7. IT Support (Digacore)' },
            { id: 'slide-9', title: '8. Email Etiquette & Signatures' },
            { id: 'slide-10', title: '9. Expenses and Travel (Part 1)' },
            { id: 'slide-11', title: '9. Expenses and Travel (Part 2)' },
            { id: 'slide-12', title: '10. Social Media' },
            { id: 'slide-13', title: '11. Visiting a Facility' },
            { id: 'slide-14', title: '12. Safety & Compliance' },
            { id: 'slide-15', title: '13. HIPAA: Protecting Privacy' },
            { id: 'slide-16', title: 'Thank You' }
        ];

        // --- Core Slideshow Functions ---

        function updateTOC() {
            tocNav.innerHTML = ''; 
            slideData.forEach((data, index) => {
                const link = document.createElement('a');
                link.href = `#${data.id}`;
                link.textContent = data.title;
                link.onclick = (e) => {
                    e.preventDefault();
                    showSlide(index, false); 
                };
                tocNav.appendChild(link);
            });
        }

        function updateControls(index) {
            prevBtn.disabled = index === 0;
            nextBtn.disabled = index === slides.length - 1;
            slideCounter.textContent = `${index + 1} / ${slides.length}`;

            const tocLinks = tocNav.querySelectorAll('a');
            tocLinks.forEach((link, idx) => {
                link.classList.remove('toc-active');
                if (idx === index) {
                    link.classList.add('toc-active');
                }
            });
        }

        function showSlide(index, useAnimation = true) {
            if (isAnimating) return;
            
            const oldIndex = currentSlideIndex;
            
            index = Math.max(0, Math.min(slides.length - 1, index));
            if (index === oldIndex) return;

            const direction = index > oldIndex ? 'next' : 'prev';

            if (!useAnimation) {
                 slides.forEach((slide, idx) => {
                    slide.classList.remove('flipping');
                    if (idx === index) {
                        slide.classList.add('active-slide');
                        slide.classList.remove('flipped-next');
                        slide.style.zIndex = 5;
                    } else if (idx < index) {
                        slide.classList.remove('active-slide');
                        slide.classList.add('flipped-next');
                        slide.style.zIndex = 1;
                    } else {
                        slide.classList.remove('active-slide', 'flipped-next');
                        slide.style.zIndex = 1;
                    }
                });
                currentSlideIndex = index;
                updateControls(currentSlideIndex);
                slides[index].scrollTop = 0;
                return;
            }

            // --- FLIP ANIMATION (NEXT/PREV BUTTON) ---
            isAnimating = true;
            
            const currentSlide = slides[oldIndex];
            const targetSlide = slides[index];

            if (direction === 'next') {
                currentSlide.style.zIndex = 10;
                targetSlide.style.zIndex = 5;
                targetSlide.classList.add('active-slide'); 
                currentSlide.classList.add('flipping');
                
                setTimeout(() => {
                    currentSlide.classList.remove('flipping', 'active-slide');
                    currentSlide.classList.add('flipped-next');
                    currentSlideIndex = index;
                    isAnimating = false;
                    updateControls(currentSlideIndex);
                }, 1000);
                
            } else if (direction === 'prev') {
                targetSlide.style.zIndex = 10; 
                targetSlide.classList.remove('flipped-next');
                
                setTimeout(() => {
                    targetSlide.classList.add('active-slide');
                    currentSlide.classList.remove('active-slide'); 
                    targetSlide.style.zIndex = 5;
                    
                    currentSlideIndex = index;
                    isAnimating = false;
                    updateControls(currentSlideIndex);
                }, 1000); 
            }
            
            targetSlide.scrollTop = 0;
        }


        function nextSlide() {
            if (!isAnimating) {
                showSlide(currentSlideIndex + 1, true);
            }
        }

        function prevSlide() {
            if (!isAnimating) {
                showSlide(currentSlideIndex - 1, true);
            }
        }
        
        // --- Core Values Scenario Logic (NO LLM CALL) ---

        let currentAnswer = "";
        
        function generateCoreValueScenario() {
            scenarioLoader.classList.remove('hidden');
            generateScenarioBtn.disabled = true;
            answerArea.classList.add('hidden');
            revealAnswerBtn.classList.add('hidden');
            answerText.classList.add('hidden');

            // Hardcoded Scenarios based on the provided context/industry
            const scenarios = [
                {
                    scenario: "A new Clinical Reimbursement Manager realizes a complex case was incorrectly coded, which could result in a payment loss. Instead of silently fixing it, they immediately inform their supervisor and suggest a training session for the team on the proper procedure.",
                    answer: "Ownership"
                },
                {
                    scenario: "A regional Director of Operations receives a glowing facility performance review. When presenting the results, they dedicate most of the time to highlighting the local facility administrator and clinical team's efforts, not their own strategic planning.",
                    answer: "Humbly Confident"
                },
                {
                    scenario: "During a challenging state survey, the Infection Control specialist discovers a flaw in the documentation process. They quickly develop a simple, temporary solution to fix the immediate issue and document a long-term fix for the department to implement later.",
                    answer: "Solution Focused"
                },
                {
                    scenario: "A Talent Acquisition coordinator is asked to hire 10 RNs in a month. They spend late nights proactively calling candidates, updating job descriptions daily based on feedback, and personally tracking conversion rates to hit the deadline.",
                    answer: "Driven to Excellence"
                }
            ];
            
            const data = scenarios[Math.floor(Math.random() * scenarios.length)];
            
            setTimeout(() => {
                scenarioText.textContent = data.scenario;
                currentAnswer = data.answer;
                answerText.textContent = `Core Value: ${currentAnswer}`;
                
                answerArea.classList.remove('hidden');
                revealAnswerBtn.classList.remove('hidden');
                
                scenarioLoader.classList.add('hidden');
                generateScenarioBtn.disabled = false;
            }, 500); // Simulate network delay
        }

        // --- Systems Matching Game Logic ---

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function createMatchItem(id, type, value, link) {
            const item = document.createElement('div');
            item.className = `match-item text-center cursor-pointer my-2 shadow-md ${type}-item transition-all`;
            item.dataset.id = id;
            item.dataset.type = type;
            item.innerHTML = value;
            
            if (type === 'source') {
                item.classList.add('bg-blue-100', 'text-blue-800');
            } else {
                item.classList.add('bg-yellow-100', 'text-yellow-800');
            }

            item.onclick = () => handleMatchClick(item, link);
            return item;
        }

        function renderMatchingGame() {
            matchGameGrid.innerHTML = '';
            
            const sources = MATCHING_DATA.map(item => ({ id: item.id, value: item.source, link: item.link }));
            const targets = MATCHING_DATA.map(item => ({ id: item.id, value: item.target }));

            shuffleArray(sources);
            shuffleArray(targets);

            const allItems = [];
            for (let i = 0; i < sources.length; i++) {
                allItems.push(createMatchItem(sources[i].id, 'source', sources[i].value, sources[i].link));
                allItems.push(createMatchItem(targets[i].id, 'target', targets[i].value));
            }
            
            shuffleArray(allItems); // Mix them all up in the final grid

            allItems.forEach(item => matchGameGrid.appendChild(item));
            updateMatchProgress();
        }

        function handleMatchClick(clickedItem, link) {
            if (clickedItem.classList.contains('matched')) return;

            const isSource = clickedItem.dataset.type === 'source';
            
            // Clear previous selection of the same type
            if (isSource && selectedSource) selectedSource.classList.remove('selected');
            if (!isSource && selectedTarget) selectedTarget.classList.remove('selected');

            // Set new selection
            clickedItem.classList.add('selected');
            if (isSource) {
                selectedSource = clickedItem;
                selectedSource.dataset.link = link; 
            } else {
                selectedTarget = clickedItem;
            }

            // Check for a match
            if (selectedSource && selectedTarget) {
                if (selectedSource.dataset.id === selectedTarget.dataset.id) {
                    // Match found!
                    matchFeedback.textContent = "Correct! Match Found.";
                    selectedSource.classList.add('matched');
                    selectedTarget.classList.add('matched');
                    selectedSource.classList.remove('selected');
                    selectedTarget.classList.remove('selected');
                    
                    // Display Link
                    matchFeedback.innerHTML += `<br><span class="text-sm font-normal text-indigo-700">Link: <a href="${selectedSource.dataset.link}" target="_blank" class="clickable-link font-semibold">${selectedSource.dataset.link}</a></span>`;

                    selectedSource = null;
                    selectedTarget = null;
                    matchedPairs++;
                    updateMatchProgress();
                    if (matchedPairs === MATCHING_DATA.length) {
                        matchFeedback.textContent = "Congratulations! You matched all the systems!";
                    }

                } else {
                    // Incorrect match
                    matchFeedback.textContent = "Incorrect match. Try again!";
                    selectedSource.classList.add('incorrect');
                    selectedTarget.classList.add('incorrect');
                    
                    setTimeout(() => {
                        selectedSource.classList.remove('selected', 'incorrect');
                        selectedTarget.classList.remove('selected', 'incorrect');
                        selectedSource = null;
                        selectedTarget = null;
                        matchFeedback.textContent = "Test your knowledge! Match the system/tool with its correct purpose."; // Clear feedback after shake
                    }, 800);
                }
            }
        }
        
        function updateMatchProgress() {
             matchProgress.textContent = `Matched: ${matchedPairs} / ${MATCHING_DATA.length}`;
        }
        
        // --- HIPAA Quiz Logic ---

        function shuffleHipaaQuiz() {
            shuffleArray(hipaaQuizData);
            currentHipaaQuestionIndex = 0;
            displayHipaaQuestion();
        }

        function displayHipaaQuestion() {
            hipaaFeedbackEl.textContent = '';
            hipaaNextBtn.classList.add('hidden');
            hipaaOptionsEl.classList.remove('pointer-events-none');
            
            hipaaOptionsEl.querySelectorAll('.quiz-option').forEach(btn => {
                btn.classList.remove('quiz-correct', 'quiz-incorrect');
                btn.disabled = false;
            });

            if (currentHipaaQuestionIndex < hipaaQuizData.length) {
                const q = hipaaQuizData[currentHipaaQuestionIndex];
                hipaaQuestionEl.textContent = `Question ${currentHipaaQuestionIndex + 1}: ${q.question}`;
            } else {
                hipaaQuestionEl.textContent = "Quiz Complete! Excellent work on your HIPAA knowledge.";
                hipaaOptionsEl.innerHTML = '';
            }
        }

        function handleHipaaAnswer(selectedAnswer) {
            const q = hipaaQuizData[currentHipaaQuestionIndex];
            const isCorrect = (selectedAnswer === "true") === q.answer;
            
            hipaaOptionsEl.classList.add('pointer-events-none'); // Disable buttons
            hipaaNextBtn.classList.remove('hidden');

            hipaaOptionsEl.querySelectorAll('.quiz-option').forEach(btn => {
                const btnAnswer = btn.getAttribute('data-answer');
                if ((btnAnswer === "true") === q.answer) {
                    btn.classList.add('quiz-correct');
                } else if (btnAnswer === selectedAnswer) {
                    btn.classList.add('quiz-incorrect');
                }
            });

            if (isCorrect) {
                hipaaFeedbackEl.innerHTML = `<span class="text-green-700 font-bold">Correct!</span> ${q.explanation}`;
            } else {
                hipaaFeedbackEl.innerHTML = `<span class="text-red-700 font-bold">Incorrect.</span> ${q.explanation}`;
            }
        }
        
        function nextHipaaQuestion() {
            currentHipaaQuestionIndex++;
            displayHipaaQuestion();
        }


        // --- Event Listeners and Initialization ---

        window.onload = function() {
            updateTOC();
            showSlide(currentSlideIndex, false); 
            renderMatchingGame(); // Initialize the matching game
            shuffleHipaaQuiz(); // Initialize the HIPAA quiz
            
            prevBtn.addEventListener('click', prevSlide);
            nextBtn.addEventListener('click', nextSlide);

            // Keyboard navigation (Arrow Keys)
            document.addEventListener('keydown', (e) => {
                if (isAnimating) return;
                if (e.key === 'ArrowRight') {
                    nextSlide();
                } else if (e.key === 'ArrowLeft') {
                    prevSlide();
                }
            });
            
            // Re-apply event listeners for buttons that might be hidden initially
            // Removed AI Modal/Drafting setup
            
            if(document.getElementById('generate-scenario-btn')) {
                 document.getElementById('generate-scenario-btn').onclick = generateCoreValueScenario;
            }
            
            // Set up link actions for mailto and internal alerts
            document.querySelectorAll('a[href^="mailto:"]').forEach(link => {
                link.onclick = function(e) {
                    // Mailto links work fine natively, no alert needed.
                }
            });
            document.querySelectorAll('a[onclick^="alert"]').forEach(link => {
                link.onclick = function(e) {
                    e.preventDefault();
                    // Keep existing simulation for placeholders
                    const text = this.getAttribute('onclick').match(/Simulating opening (.*?)'/)[1];
                    alert(`Simulating opening external link/policy for: ${text}`);
                }
            });

            // --- HIPAA Quiz Event Listeners ---
            hipaaOptionsEl.querySelectorAll('.quiz-option').forEach(btn => {
                btn.addEventListener('click', function() {
                    handleHipaaAnswer(this.getAttribute('data-answer'));
                });
            });
            hipaaNextBtn.addEventListener('click', nextHipaaQuestion);
        };
    </script>
</body>
</html>
